-- Вставка тестовых данных

-- Предметы ЕГЭ
INSERT INTO subjects (subject_name, min_score) VALUES
('Математика', 45),
('Информатика', 35),
('Русский язык',40),
('Физика', 35),
('Обществознание', 35),
('История', 35),
('Иностранный язык', 35),
('Химия', 35);

-- Образовательные программы НГТУ с реальными данными
INSERT INTO educational_programs (faculty_id, program_name, description, budget_places, last_year_pass_score, price) VALUES
-- Авиастроительный факультет
(1, 'Самолето- и вертолетостроение', 'Проектирование и конструкция летательных аппаратов', 60, 245, 255000),
(1, 'Прочность летательных аппаратов', 'Расчеты на прочность авиационных конструкций', 45, 238, 255000),
(1, 'Системы сбора и обработки данных', 'Бортовые системы и обработка информации', 40, 242, 255000),

-- Факультет автоматики и вычислительной техники
(2, 'Информатика и вычислительная техника', 'Компьютерные системы, сети и телекоммуникации', 145, 258, 270000),
(2, 'Программная инженерия', 'Разработка программного обеспечения', 41, 265, 270000),
(2, 'Информационная безопасность', 'Защита информации в компьютерных системах', 45, 252, 270000),
(2, 'Управление в технических системах', 'Автоматизация и робототехника', 48, 248, 270000),

-- Факультет летательных аппаратов
(3, 'Аэрогидродинамика', 'Исследование потоков газа и жидкости', 35, 240, 250000),
(3, 'Газодинамические импульсные устройства', 'Импульсные системы и устройства', 30, 235, 250000),

-- Механико-технологический факультет
(4, 'Технология машиностроения', 'Производственные технологии в машиностроении', 50, 230, 240000),
(4, 'Материаловедение в машиностроении', 'Исследование и разработка материалов', 40, 228, 240000),
(4, 'Химическая технология', 'Химические процессы и производство', 35, 225, 240000),

-- Факультет прикладной математики и информатики
(5, 'Прикладная математика и информатика', 'Математическое моделирование и вычислительные методы', 55, 260, 265000),
(5, 'Фундаментальная информатика и IT', 'Теоретические основы информатики', 40, 255, 265000),

-- Физико-технический факультет
(6, 'Физика', 'Фундаментальная и прикладная физика', 40, 245, 245000),
(6, 'Нанотехнологии', 'Наноматериалы и наносистемы', 35, 242, 245000),

-- Радиотехнический факультет
(7, 'Радиотехника', 'Системы радиосвязи и вещания', 45, 248, 250000),
(7, 'Инфокоммуникационные технологии', 'Сети и системы связи', 50, 245, 250000),

-- Энергетический факультет
(8, 'Электроэнергетика', 'Производство, передача и распределение электроэнергии', 60, 235, 235000),
(8, 'Теплоэнергетика', 'Тепловые и атомные электростанции', 45, 230, 235000),

-- Факультет бизнеса
(9, 'Экономика', 'Экономика предприятий и отраслей', 70, 240, 220000),
(9, 'Менеджмент', 'Управление организациями и проектами', 65, 238, 220000),
(9, 'Бизнес-информатика', 'IT в бизнесе и управлении', 50, 242, 220000),

-- Гуманитарный факультет
(10, 'Лингвистика', 'Теория и практика перевода', 40, 245, 200000),
(10, 'Реклама и связи с общественностью', 'Маркетинговые коммуникации', 45, 242, 200000),

-- Факультет юридических наук
(11, 'Юриспруденция', 'Гражданское и уголовное право', 50, 255, 210000);

-- Связь программ и предметов ЕГЭ
INSERT INTO program_subjects (program_id, subject_id, is_required) VALUES
-- Технические направления (математика + физика/информатика + русский)
(1, 1, true), (1, 3, true), (1, 4, true),
(2, 1, true), (2, 3, true), (2, 4, true),
(3, 1, true), (3, 3, true), (3, 4, true),
(4, 1, true), (4, 3, true), (4, 2, true),
(5, 1, true), (5, 3, true), (5, 2, true),
(6, 1, true), (6, 3, true), (6, 2, true),
(7, 1, true), (7, 3, true), (7, 4, true),
(8, 1, true), (8, 3, true), (8, 4, true),
(9, 1, true), (9, 3, true), (9, 4, true),
(10, 1, true), (10, 3, true), (10, 4, true),
(11, 1, true), (11, 3, true), (11, 4, true),
(12, 1, true), (12, 3, true), (12, 8, true),
(13, 1, true), (13, 3, true), (13, 2, true),
(14, 1, true), (14, 3, true), (14, 2, true),
(15, 1, true), (15, 3, true), (15, 4, true),
(16, 1, true), (16, 3, true), (16, 4, true),
(17, 1, true), (17, 3, true), (17, 4, true),
(18, 1, true), (18, 3, true), (18, 4, true),
(19, 1, true), (19, 3, true), (19, 4, true),
(20, 1, true), (20, 3, true), (20, 4, true),
-- Экономические направления
(21, 1, true), (21, 3, true), (21, 5, true),
(22, 1, true), (22, 3, true), (22, 5, true),
(23, 1, true), (23, 3, true), (23, 2, true),
-- Гуманитарные направления
(24, 3, true), (24, 7, true), (24, 6, false),
(25, 3, true), (25, 5, true), (25, 7, false),
-- Юридические направления - ИСПРАВЛЕНО: программа 25
(26, 3, true), (26, 5, true), (26, 6, true);


-- Профили абитуриентов
INSERT INTO applicant_profiles (user_id, total_score) VALUES
(1, 285),
(2, 272),
(6, 258);

-- Баллы абитуриентов по предметам
INSERT INTO applicant_scores (user_id, subject_id, score) VALUES
(1, 1, 90), (1, 2, 95), (1, 3, 100),
(2, 1, 85), (2, 2, 92), (2, 3, 95),
(6, 1, 88), (6, 4, 82), (6, 3, 88);

-- Дни открытых дверей НГТУ
INSERT INTO open_days (faculty_id, event_date, description, max_participants) VALUES
(1, '2025-12-15 15:00:00', 'День открытых дверей Авиастроительного факультета. Экскурсия в лаборатории аэродинамики.', 80),
(2, '2025-12-20 16:00:00', 'День открытых дверей ФАВТ. Презентация IT-направлений, мастер-классы по программированию.', 120),
(4, '2025-12-25 14:00:00', 'День открытых дверей Механико-технологического факультета. Демонстрация современных станков.', 60),
(8, '2025-01-15 15:30:00', 'День открытых дверей Энергетического факультета. Знакомство с лабораториями энергосистем.', 70),
(9, '2025-01-20 13:00:00', 'День открытых дверей Факультета бизнеса. Встреча с успешными выпускниками-предпринимателями.', 90);

-- Регистрации на дни открытых дверей
INSERT INTO open_day_registrations (event_id, max_id) VALUES
(1, 1), (1, 2), (1, 6),
(2, 1), (2, 6),
(3, 2),
(4, 1), (4, 2),
(5, 6);


-- Наполнение тестовыми данными
INSERT INTO books (title, author, isbn, description, total_copies, available_copies,is_paper, is_digital, digital_link) VALUES
('Преступление и наказание', 'Фёдор Достоевский', '978-5-17-090333-5', 'Роман о бывшем студенте Родионе Раскольникове, совершившем убийство', 5, 5,TRUE, TRUE, 'https://example.com/books/crime_punishment.pdf'),
('Мастер и Маргарита', 'Михаил Булгаков', '978-5-17-090334-2', 'Роман о визите дьявола в Москву 1930-х годов', 3, 3,TRUE, FALSE, NULL),
('Война и мир', 'Лев Толстой', '978-5-17-090335-9', 'Эпопея о русском обществе во время наполеоновских войн', 4, 4,FALSE, TRUE, 'https://example.com/books/war_peace.pdf'),
('1984', 'Джордж Оруэлл', '978-5-17-090336-6', 'Антиутопический роман о тоталитарном обществе', 2, 2,TRUE, FALSE, NULL),
('Гарри Поттер и философский камень', 'Джоан Роулинг', '978-5-17-090337-3', 'Первая книга серии о юном волшебнике', 6, 6,FALSE, TRUE, 'https://example.com/books/harry_potter.pdf');



DROP TABLE IF EXISTS faculty_deans CASCADE;
-- Создаем таблицу для связи деканов с факультетами (если еще не создана)
CREATE TABLE IF NOT EXISTS faculty_deans (
    faculty_id INTEGER NOT NULL REFERENCES faculties(faculty_id),
    user_id BIGINT NOT NULL REFERENCES users(user_id),
    assigned_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (faculty_id, user_id)
);

-- Назначаем деканов на факультеты
INSERT INTO faculty_deans (faculty_id, user_id) VALUES
(1, 7),  -- Андрей Семенов - декан Авиастроительного факультета
(2, 8);  -- Наталья Ковалева - декан Факультета автоматики и вычислительной техники

-- Добавляем дополнительные регистрации на дни открытых дверей от новых пользователей
INSERT INTO open_day_registrations (event_id, max_id) VALUES
(2, 3), (2, 7), (3, 8), (4, 5), (5, 9);

-- Обновляем описание дней открытых дверей с упоминанием деканов
UPDATE open_days SET description = 'День открытых дверей Авиастроительного факультета. Экскурсия в лаборатории аэродинамики. Встреча с деканом Семеновым А.В.' WHERE event_id = 1;
UPDATE open_days SET description = 'День открытых дверей ФАВТ. Презентация IT-направлений, мастер-классы по программированию. Выступление декана Ковалевой Н.П.' WHERE event_id = 2;

-- Добавляем дополнительные дни открытых дверей
INSERT INTO open_days (faculty_id, event_date, description, max_participants) VALUES
(5, '2025-02-10 14:00:00', 'День открытых дверей ФПМИ. Мастер-классы по математическому моделированию.', 75),
(9, '2025-02-15 15:00:00', 'День открытых дверей Факультета бизнеса. Кейс-чемпионат по менеджменту.', 100);

-- Добавляем регистрации на новые события
INSERT INTO open_day_registrations (event_id, max_id) VALUES
(6, 1), (6, 6), (6, 9),
(7, 2), (7, 5), (7, 7);

-- Добавляем обязанности для staff
INSERT INTO staff_responsibilities (user_id, responsibility_area, description) VALUES
(5, 'Приемная комиссия', 'Работа с документами абитуриентов, консультации по поступлению'),
(5, 'Организация мероприятий', 'Подготовка дней открытых дверей и встреч с абитуриентами'),
(6, 'IT-поддержка', 'Техническая поддержка информационных систем университета'),
(6, 'База данных', 'Обслуживание и сопровождение базы данных абитуриентов');



-- Добавляем тестовое расписание для групп и преподавателей
-- Расписание для группы АВТ-101 (нечетная неделя)
INSERT INTO schedule (group_id, teacher_id, subject_name, week_type, day_of_week, start_time, end_time, classroom) VALUES
(1, 6, 'Математический анализ', 'odd', 1, '13:00', '14:30', 'А-101'),
(1, 6, 'Программирование', 'odd', 1, '11:00', '12:30', 'А-102'),
(1, 8, 'Физика', 'odd', 2, '10:00', '11:30', 'Б-201'),
(1, 10, 'Базы данных', 'odd', 3, '14:00', '15:30', 'А-101'),
(1, 11, 'Операционные системы', 'odd', 4, '09:00', '10:30', 'В-301'),
(1, 12, 'Веб-технологии', 'odd', 5, '13:00', '14:30', 'А-102');

-- Расписание для группы АВТ-101 (четная неделя)
INSERT INTO schedule (group_id, teacher_id, subject_name, week_type, day_of_week, start_time, end_time, classroom) VALUES
(1, 10, 'Дискретная математика', 'even', 1, '09:00', '10:30', 'А-101'),
(1, 12, 'Алгоритмы и структуры данных', 'even', 1, '11:00', '12:30', 'А-103'),
(1, 11, 'Компьютерные сети', 'even', 2, '10:00', '11:30', 'Б-202'),
(1, 10, 'Теория вероятностей', 'even', 3, '14:00', '15:30', 'В-302'),
(1, 12, 'Иностранный язык', 'even', 4, '09:00', '10:30', 'В-301'),
(1, 9, 'Физкультура', 'even', 5, '13:00', '14:30', 'Стадион');


-- Тестовые данные для цифровой кафедры
INSERT INTO digital_departments (department_name, description, available_places, application_deadline, min_gpa) VALUES
('Искусственный интеллект и машинное обучение', 'Программа готовит специалистов по разработке и внедрению AI-решений', 30, '2025-12-12', 4.0),
('Цифровая трансформация бизнеса', 'Программа направлена на подготовку специалистов в области цифровизации бизнес-процессов', 25, '2025-12-12', 3.8),
('Кибербезопасность и защита данных', 'Программа готовит специалистов в области информационной безопасности', 20, '2025-12-12', 4.2),
('Data Science и аналитика больших данных', 'Программа готовит специалистов по работе с большими данными и аналитике', 35, '2025-12-12', 4.1);




-- Тестовые данные для контрактов преподавателей
INSERT INTO teacher_contracts (user_id, contract_number, position, department, start_date, end_date, salary, contract_type, status) VALUES
(6, 'ТР-2025-001', 'Доцент', 'Кафедра информатики и вычислительной техники', '2025-09-03', '2026-09-03', 85000.00, 'fixed_term', 'active'),
(6, 'ТР-2024-002', 'Старший преподаватель', 'Кафедра математического анализа', '2024-09-01', '2025-09-01', 75000.00, 'fixed_term', 'expired'),
(8, 'ТР-2024-003', 'Профессор', 'Кафедра искусственного интеллекта', '2024-02-01', '2026-01-31', 120000.00, 'fixed_term', 'active');

-- Тестовые данные для конкурсов на замещение
INSERT INTO vacancy_competitions (position, department, vacancy_count, salary_range, requirements, responsibilities, application_start_date, application_end_date, competition_date, status) VALUES
('Доцент', 'Кафедра информатики и вычислительной техники', 2, '80000-95000 руб.',
 'Высшее образование, ученая степень кандидата технических наук, опыт преподавания не менее 3 лет',
 'Чтение лекций, проведение практических занятий, научно-исследовательская работа, руководство курсовыми и дипломными проектами',
 '2025-12-01', '2026-01-15', '2025-11-30', 'active'),

('Старший преподаватель', 'Кафедра математического анализа', 1, '70000-85000 руб.',
 'Высшее образование, опыт преподавания не менее 2 лет, публикации в научных журналах',
 'Проведение практических занятий, консультации студентов, разработка учебно-методических материалов',
 '2025-11-15', '2026-12-20', '2025-11-13', 'active'),

('Профессор', 'Кафедра кибербезопасности', 1, '110000-130000 руб.',
 'Высшее образование, ученая степень доктора технических наук, опыт научной работы не менее 10 лет',
 'Руководство научными исследованиями, чтение лекций, подготовка аспирантов, участие в экспертной деятельности',
 '2025-12-10', '2025-02-01', '2025-12-18', 'active');